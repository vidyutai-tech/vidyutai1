-- Seed data for VidyutAI Database

-- Insert test users
INSERT OR IGNORE INTO users (id, email, password, name, role) VALUES
('user-1', 'admin@vidhyut.ai', 'password123', 'Admin User', 'admin'),
('user-2', 'operator@vidhyut.ai', 'password123', 'Operator User', 'operator'),
('user-3', 'viewer@vidhyut.ai', 'password123', 'Viewer User', 'viewer');

-- Insert test sites
INSERT OR IGNORE INTO sites (id, name, location, latitude, longitude, capacity, status, energy_saved, cost_reduced) VALUES
('site-1', 'IIT Gandhinagar Campus', 'Gandhinagar, Gujarat', 23.2156, 72.6369, 2500, 'online', 12500.50, 450000),
('site-2', 'Naroda Industrial Estate', 'Ahmedabad, Gujarat', 23.0697, 72.6522, 1800, 'online', 8750.25, 320000),
('site-3', 'Vadodara Solar Farm', 'Vadodara, Gujarat', 22.3072, 73.1812, 3200, 'maintenance', 15200.75, 580000);

-- Insert test assets for site-1 (IIT Gandhinagar Campus)
INSERT OR IGNORE INTO assets (id, site_id, name, type, status, health_score, manufacturer, model, capacity, installed_date) VALUES
('asset-1', 'site-1', 'Rooftop Solar Array A', 'solar', 'online', 98.5, 'Tata Power Solar', 'TP-500-M', 500, '2022-01-15'),
('asset-2', 'site-1', 'Battery Storage System 1', 'battery', 'online', 95.2, 'Tesla', 'Powerpack 2', 250, '2022-03-20'),
('asset-3', 'site-1', 'Main Inverter', 'inverter', 'online', 97.8, 'SMA Solar', 'Sunny Tripower', 300, '2022-01-15'),
('asset-4', 'site-1', 'Smart Meter 1', 'meter', 'online', 99.5, 'Siemens', 'PAC3200', 0, '2022-01-10'),
('asset-5', 'site-1', 'EV Charging Station', 'ev_charger', 'online', 96.3, 'ABB', 'Terra HP', 150, '2022-06-01'),
('asset-6', 'site-1', 'HVAC Motor 1', 'motor', 'online', 92.1, 'Crompton Greaves', 'IE3-100', 75, '2021-08-15');

-- Insert test assets for site-2 (Naroda Industrial Estate)
INSERT OR IGNORE INTO assets (id, site_id, name, type, status, health_score, manufacturer, model, capacity) VALUES
('asset-7', 'site-2', 'Ground Solar Array', 'solar', 'online', 97.2, 'Vikram Solar', 'Eldora 445', 400),
('asset-8', 'site-2', 'Battery Bank 1', 'battery', 'online', 93.8, 'Exide', 'PowerSafe', 200),
('asset-9', 'site-2', 'Inverter System', 'inverter', 'online', 96.5, 'ABB', 'PVS980', 250);

-- Insert test alerts
INSERT OR IGNORE INTO alerts (id, site_id, asset_id, severity, type, title, message, status) VALUES
('alert-1', 'site-1', 'asset-2', 'medium', 'performance', 'Battery SOC Low', 'Battery State of Charge has dropped to 15%. Consider reducing load or charging.', 'active'),
('alert-2', 'site-1', 'asset-6', 'high', 'maintenance', 'Motor Vibration High', 'Abnormal vibration detected in HVAC Motor 1. Schedule inspection.', 'active'),
('alert-3', 'site-2', 'asset-7', 'low', 'info', 'Solar Generation Below Forecast', 'Current generation is 10% below forecast due to cloud cover.', 'acknowledged');

-- Note: Timeseries data will be generated by Node.js code since SQLite doesn't have generate_series

-- Insert sample predictions
INSERT OR IGNORE INTO predictions (id, site_id, asset_id, prediction_type, predicted_value, confidence, prediction_date) VALUES
('pred-1', 'site-1', 'asset-1', 'solar_generation', 2450.5, 0.92, datetime('now', '+1 day')),
('pred-2', 'site-1', 'asset-2', 'battery_soh', 94.8, 0.87, datetime('now', '+30 days')),
('pred-3', 'site-1', 'asset-6', 'maintenance_needed', 0.78, 0.85, datetime('now', '+7 days'));

-- Insert sample maintenance records
INSERT OR IGNORE INTO maintenance_records (id, asset_id, maintenance_type, description, performed_by, performed_at, status, cost) VALUES
('maint-1', 'asset-1', 'inspection', 'Quarterly solar panel cleaning and inspection', 'John Smith', datetime('now', '-15 days'), 'completed', 5000),
('maint-2', 'asset-2', 'preventive', 'Battery health check and calibration', 'Tech Team', datetime('now', '-30 days'), 'completed', 8000),
('maint-3', 'asset-6', 'inspection', 'Motor bearing inspection', 'Maintenance Crew', datetime('now', '+5 days'), 'scheduled', 3500);

-- Insert sample RL suggestions
INSERT OR IGNORE INTO rl_suggestions (id, site_id, suggestion_type, current_config, suggested_config, expected_savings, confidence, status, expires_at) VALUES
('rl-1', 'site-1', 'battery_schedule', '{"charge_hours": [0,1,2,3], "discharge_hours": [18,19,20,21]}', '{"charge_hours": [2,3,4,5], "discharge_hours": [17,18,19,20,21,22]}', 1250.50, 0.89, 'pending', datetime('now', '+2 hours')),
('rl-2', 'site-1', 'load_shifting', '{"critical_loads": [100], "non_critical": [50]}', '{"critical_loads": [100], "non_critical": [30]}', 850.25, 0.76, 'pending', datetime('now', '+2 hours'));

-- Insert system settings
INSERT OR IGNORE INTO system_settings (key, value, description) VALUES
('app_version', '1.0.0', 'Application version'),
('currency', 'INR', 'Currency for cost calculations'),
('timezone', 'Asia/Kolkata', 'System timezone'),
('electricity_price_peak', '8.5', 'Peak hour electricity price (INR/kWh)'),
('electricity_price_offpeak', '5.0', 'Off-peak electricity price (INR/kWh)'),
('data_retention_days', '365', 'Number of days to retain timeseries data');

